!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.returnExports=r()}(this,function(){function e(o,i){if("function"!=typeof i)throw new Error("Bad callback given: "+i);if(!o)throw new Error("No options given");var a=o.onResponse;if(o="string"==typeof o?{uri:o}:JSON.parse(JSON.stringify(o)),o.onResponse=a,o.verbose&&(e.log=r()),o.url&&(o.uri=o.url,delete o.url),!o.uri&&""!==o.uri)throw new Error("options.uri is a required argument");if("string"!=typeof o.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(o[u[c]])throw new Error("options."+u[c]+" is not supported");if(o.callback=i,o.method=o.method||"GET",o.headers=o.headers||{},o.body=o.body||null,o.timeout=o.timeout||e.DEFAULT_TIMEOUT,o.headers.host)throw new Error("Options.headers.host is not supported");o.json&&(o.headers.accept=o.headers.accept||"application/json","GET"!==o.method&&(o.headers["content-type"]="application/json"),"boolean"!=typeof o.json?o.body=JSON.stringify(o.json):"string"!=typeof o.body&&(o.body=JSON.stringify(o.body)));var l=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};if(o.qs){var f="string"==typeof o.qs?o.qs:l(o.qs);-1!==o.uri.indexOf("?")?o.uri=o.uri+"&"+f:o.uri=o.uri+"?"+f}var h=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+e[r]+"\n");return n.push("--"+t.boundry+"--"),t.body=n.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t};if(o.form){if("string"==typeof o.form)throw"form name unsupported";if("POST"===o.method){var d=(o.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(o.headers["content-type"]=d,d){case"application/x-www-form-urlencoded":o.body=l(o.form).replace(/%20/g,"+");break;case"multipart/form-data":var p=h(o.form);o.body=p.body,o.headers["content-type"]=p.type;break;default:throw new Error("unsupported encoding:"+d)}}}return o.onResponse=o.onResponse||n,o.onResponse===!0&&(o.onResponse=i,o.callback=n),!o.headers.authorization&&o.auth&&(o.headers.authorization="Basic "+s(o.auth.username+":"+o.auth.password)),t(o)}function t(t){function n(){f=!0;var n=new Error("ETIMEDOUT");return n.code="ETIMEDOUT",n.duration=t.timeout,e.log.error("Timeout",{id:l._id,milliseconds:t.timeout}),t.callback(n,l)}function r(n){if(f)return e.log.debug("Ignoring timed out state change",{state:l.readyState,id:l.id});if(e.log.debug("State change",{state:l.readyState,id:l.id,timed_out:f}),l.readyState===a.OPENED){e.log.debug("Request started",{id:l.id});for(var r in t.headers)l.setRequestHeader(r,t.headers[r])}else l.readyState===a.HEADERS_RECEIVED?o():l.readyState===a.LOADING?(o(),s()):l.readyState===a.DONE&&(o(),s(),u())}function o(){if(!v.response){if(v.response=!0,e.log.debug("Got response",{id:l.id,status:l.status}),clearTimeout(l.timeoutTimer),l.statusCode=l.status,h&&0==l.statusCode){var n=new Error("CORS request rejected: "+t.uri);return n.cors="rejected",v.loading=!0,v.end=!0,t.callback(n,l)}t.onResponse(null,l)}}function s(){v.loading||(v.loading=!0,e.log.debug("Response body loading",{id:l.id}))}function u(){if(!v.end){if(v.end=!0,e.log.debug("Request done",{id:l.id}),l.body=l.responseText,t.json)try{l.body=JSON.parse(l.responseText)}catch(n){return t.callback(n,l)}t.callback(null,l,l.body)}}var l=new a,f=!1,h=i(t.uri),d="withCredentials"in l;if(c+=1,l.seq_id=c,l.id=c+": "+t.method+" "+t.uri,l._id=l.id,h&&!d){var p=new Error("Browser does not support cross-origin request: "+t.uri);return p.cors="unsupported",t.callback(p,l)}l.timeoutTimer=setTimeout(n,t.timeout);var v={response:!1,loading:!1,end:!1};return l.onreadystatechange=r,l.open(t.method,t.uri,!0),h&&(l.withCredentials=!!t.withCredentials),l.send(t.body),l}function n(){}function r(){var e,t,r={},i=["trace","debug","info","warn","error"];for(t=0;t<i.length;t++)e=i[t],r[e]=n,"undefined"!=typeof console&&console&&console[e]&&(r[e]=o(console,e));return r}function o(e,t){function n(n,r){return"object"==typeof r&&(n+=" "+JSON.stringify(r)),e[t].call(e,n)}return n}function i(e){var t,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(r){t=document.createElement("a"),t.href="",t=t.href}var o=n.exec(t.toLowerCase())||[],i=n.exec(e.toLowerCase()),s=!(!i||i[1]==o[1]&&i[2]==o[2]&&(i[3]||("http:"===i[1]?80:443))==(o[3]||("http:"===o[1]?80:443)));return s}function s(e){var t,n,r,o,i,s,a,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,h="",d=[];if(!e)return e;do t=e.charCodeAt(l++),n=e.charCodeAt(l++),r=e.charCodeAt(l++),u=t<<16|n<<8|r,o=u>>18&63,i=u>>12&63,s=u>>6&63,a=63&u,d[f++]=c.charAt(o)+c.charAt(i)+c.charAt(s)+c.charAt(a);while(l<e.length);switch(h=d.join(""),e.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h}var a=XMLHttpRequest;if(!a)throw new Error("missing XMLHttpRequest");e.log={trace:n,debug:n,info:n,warn:n,error:n};var u=18e4,c=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=u,e.defaults=function(t,n){var r=function(e){var n=function(n,r){n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n));for(var o in t)void 0===n[o]&&(n[o]=t[o]);return e(n,r)};return n},o=r(e);return o.get=r(e.get),o.post=r(e.post),o.put=r(e.put),o.head=r(e.head),o};var l=["get","put","post","head"];return l.forEach(function(t){var n=t.toUpperCase(),r=t.toLowerCase();e[r]=function(t){"string"==typeof t?t={method:n,uri:t}:(t=JSON.parse(JSON.stringify(t)),t.method=n);var r=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,r)}}),e.couch=function(t,r){function o(e,t,n){if(e)return r(e,t,n);if((t.statusCode<200||t.statusCode>299)&&n.error){e=new Error("CouchDB error: "+(n.error.reason||n.error.error));for(var o in n)e[o]=n[o];return r(e,t,n)}return r(e,t,n)}"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,r=r||n;var i=e(t,o);return i},e})},{}],2:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),u=1;r>u;u++)i[u-1]=arguments[u];n.apply(this,i)}else if(s(n)){for(r=arguments.length,i=new Array(r-1),u=1;r>u;u++)i[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=i;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t,n){function r(){l=!1,a.length?c=a.concat(c):f=-1,c.length&&o()}function o(){if(!l){var e=setTimeout(r);l=!0;for(var t=c.length;t;){for(a=c,c=[];++f<t;)a&&a[f].run();f=-1,t=c.length}a=null,l=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},c=[],l=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new i(e,t)),1!==c.length||l||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],4:[function(e,t,n){(function(n,r){(function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){K=e}function u(e){Y=e}function c(){return function(){n.nextTick(p)}}function l(){return function(){B(p)}}function f(){var e=0,t=new Q(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function h(){var e=new MessageChannel;return e.port1.onmessage=p,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(p,1)}}function p(){for(var e=0;X>e;e+=2){var t=te[e],n=te[e+1];t(n),te[e]=void 0,te[e+1]=void 0}X=0}function v(){try{var t=e,n=t("vertx");return B=n.runOnLoop||n.runOnContext,l()}catch(r){return d()}}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return ie.error=t,ie}}function b(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function w(e,t,n){Y(function(e){var r=!1,o=b(n,t,function(n){r||(r=!0,t!==n?C(e,n):T(e,n))},function(t){r||(r=!0,j(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,j(e,o))},e)}function k(e,t){t._state===re?T(e,t._result):t._state===oe?j(e,t._result):O(t,void 0,function(t){C(e,t)},function(t){j(e,t)})}function E(e,t){if(t.constructor===e.constructor)k(e,t);else{var n=m(t);n===ie?j(e,ie.error):void 0===n?T(e,t):i(n)?w(e,t,n):T(e,t)}}function C(e,t){e===t?j(e,y()):o(t)?E(e,t):T(e,t)}function P(e){e._onerror&&e._onerror(e._result),x(e)}function T(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&Y(x,e))}function j(e,t){e._state===ne&&(e._state=oe,e._result=t,Y(P,e))}function O(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+re]=n,o[i+oe]=r,0===i&&e._state&&Y(x,e)}function x(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?L(n,r,o,i):o(i);e._subscribers.length=0}}function I(){this.error=null}function S(e,t){try{return e(t)}catch(n){return se.error=n,se}}function L(e,t,n,r){var o,s,a,u,c=i(n);if(c){if(o=S(n,r),o===se?(u=!0,s=o.error,o=null):a=!0,t===o)return void j(t,_())}else o=r,a=!0;t._state!==ne||(c&&a?C(t,o):u?j(t,s):e===re?T(t,o):e===oe&&j(t,o))}function R(e,t){try{t(function(t){C(e,t)},function(t){j(e,t)})}catch(n){j(e,n)}}function N(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(g),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?T(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&T(n.promise,n._result))):j(n.promise,n._validationError())}function A(e){return new ae(this,e).promise}function D(e){function t(e){C(o,e)}function n(e){j(o,e)}var r=this,o=new r(g);if(!V(e))return j(o,new TypeError("You must pass an array to race.")),o;for(var i=e.length,s=0;o._state===ne&&i>s;s++)O(r.resolve(e[s]),void 0,t,n);return o}function q(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return C(n,e),n}function M(e){var t=this,n=new t(g);return j(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function J(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this._id=he++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==e&&(i(e)||U(),this instanceof G||J(),R(this,e))}function F(){var e;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=de)}var H;H=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var B,K,$,V=H,X=0,Y=({}.toString,function(e,t){te[X]=e,te[X+1]=t,X+=2,2===X&&(K?K(p):$())}),z="undefined"!=typeof window?window:void 0,W=z||{},Q=W.MutationObserver||W.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);$=Z?c():Q?f():ee?h():void 0===z&&"function"==typeof e?v():d();var ne=void 0,re=1,oe=2,ie=new I,se=new I;N.prototype._validateInput=function(e){return V(e)},N.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},N.prototype._init=function(){this._result=new Array(this.length)};var ae=N;N.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,o=0;n._state===ne&&t>o;o++)e._eachEntry(r[o],o)},N.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;s(e)?e.constructor===r&&e._state!==ne?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},N.prototype._settledAt=function(e,t,n){var r=this,o=r.promise;o._state===ne&&(r._remaining--,e===oe?j(o,n):r._result[t]=n),0===r._remaining&&T(o,r._result)},N.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,function(e){n._settledAt(re,t,e)},function(e){n._settledAt(oe,t,e)})};var ue=A,ce=D,le=q,fe=M,he=0,de=G;G.all=ue,G.race=ce,G.resolve=le,G.reject=fe,G._setScheduler=a,G._setAsap=u,G._asap=Y,G.prototype={constructor:G,then:function(e,t){var n=this,r=n._state;if(r===re&&!e||r===oe&&!t)return this;var o=new this.constructor(g),i=n._result;if(r){var s=arguments[r-1];Y(function(){L(r,o,s,i)})}else O(n,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var pe=F,ve={Promise:de,polyfill:pe};"function"==typeof define&&define.amd?define(function(){return ve}):"undefined"!=typeof t&&t.exports?t.exports=ve:"undefined"!=typeof this&&(this.ES6Promise=ve),pe()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return a[e]||null}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./logger"),a={},u=function(){function e(t,n){return r(this,e),this.logger=new s.Logger({prefix:"Ionic App:"}),t&&""!==t?n&&""!==n?(a.id=t,a.apiKey=n,this.devPush=null,void(this.gcmKey=null)):(this.logger.info("No api_key was provided"),!1):(this.logger.info("No app_id was provided"),!1)}return i(e,[{key:"toString",value:function(){return"<IonicApp ['"+this.id+"'>"}},{key:"id",get:function(){return o("id")}},{key:"apiKey",get:function(){return o("apiKey")}}]),e}();n.App=u},{"./logger":8}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./events"),s=e("./storage"),a=e("./logger"),u=new i.EventEmitter,c=function(){function e(){r(this,e);var t=this;this.logger=new a.Logger({prefix:"Ionic Core:"}),this.logger.info("init"),this._pluginsReady=!1,this.emitter=e.getEmitter();try{document.addEventListener("deviceready",function(){t.logger.info("plugins are ready"),t._pluginsReady=!0,t.emitter.emit("ionic_core:plugins_ready")},!1)}catch(n){t.logger.info("unable to listen for cordova plugins to be ready")}this._bootstrap()}return o(e,[{key:"_isCordovaAvailable",value:function(){var e=this;if(this.logger.info("searching for cordova.js"),"undefined"!=typeof cordova)return this.logger.info("cordova.js has already been loaded"),!0;for(var t=document.getElementsByTagName("script"),n=t.length,r=0;n>r;r++){var o=t[r].getAttribute("src");if(o){var i=o.split("/"),s=0;try{if(s=i.length,"cordova.js"===i[s-1])return e.logger.info("cordova.js has previously been included."),!0}catch(a){e.logger.info("encountered error while testing for cordova.js presence, "+a.toString())}}}return!1}},{key:"loadCordova",value:function(){var t=this;if(!this._isCordovaAvailable()){var n=document.createElement("script"),r="cordova.js";switch(e.getDeviceTypeByNavigator()){case"android":"file"===window.location.href.substring(0,4)&&(r="file:///android_asset/www/cordova.js");break;case"ipad":case"iphone":try{var o=window.location.search.match(/cordova_js_bootstrap_resource=(.*?)(&|#|$)/i);o&&(r=decodeURI(o[1]))}catch(i){t.logger.info("could not find cordova_js_bootstrap_resource query param"),t.logger.info(i)}break;case"unknown":return!1}n.setAttribute("src",r),document.head.appendChild(n),t.logger.info("injecting cordova.js")}}},{key:"_bootstrap",value:function(){this.loadCordova()}},{key:"onReady",value:function(e){var t=this;this._pluginsReady?e(t):t.emitter.on("ionic_core:plugins_ready",function(){e(t)})}}],[{key:"getEmitter",value:function(){return u}},{key:"getStorage",value:function(){return s.Storage}},{key:"getDeviceTypeByNavigator",value:function(){var e=navigator.userAgent,t=e.match(/iPad/i);if(t&&"ipad"===t[0].toLowerCase())return"ipad";var n=e.match(/iPhone/i);if(n&&"iphone"===n[0].toLowerCase())return"iphone";var r=e.match(/Android/i);return r&&"android"===r[0].toLowerCase()?"android":"unknown"}},{key:"isAndroidDevice",value:function(){var t=e.getDeviceTypeByNavigator();return"android"===t?!0:!1}},{key:"isIOSDevice",value:function(){var t=e.getDeviceTypeByNavigator();return"iphone"===t||"ipad"===t?!0:!1}},{key:"deviceConnectedToNetwork",value:function(e){if("undefined"==typeof e&&(e=!1),"undefined"==typeof navigator.connection||"undefined"==typeof navigator.connection.type||"undefined"==typeof Connection)return e?!1:!0;switch(navigator.connection.type){case Connection.ETHERNET:case Connection.WIFI:case Connection.CELL_2G:case Connection.CELL_3G:case Connection.CELL_4G:case Connection.CELL:return!0;default:return!1}}},{key:"Version",get:function(){return"0.1.0"}}]),e}();n.IonicPlatform=c},{"./events":7,"./logger":8,"./storage":12}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("events"),s=function(){function e(){r(this,e),this._emitter=new i}return o(e,[{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}}]),e}();n.EventEmitter=s},{events:2}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e);var n=t||{};this._silence=!1,this._prefix=!1,this._options=n,this._bootstrap()}return o(e,[{key:"_bootstrap",value:function(){this._options.prefix&&(this._prefix=this._options.prefix)}},{key:"info",value:function(e){this._silence||(this._prefix?console.log(this._prefix,e):console.log(e))}},{key:"error",value:function(e){this._prefix?console.error(this._prefix,e):console.error(e)}}]),e}();n.Logger=i},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("es6-promise").Promise,s=i;n.Promise=s;var a=function(){function e(){r(this,e);var t=this;this._update=!1,this.promise=new i(function(e,n){t.resolve=e,t.reject=n});var n=this.promise.then;this.promise.then=function(e,r,o){return t._update=o,n.call(t.promise,e,r)}}return o(e,[{key:"notify",value:function(e){this._update&&"function"==typeof this._update&&this._update(e)}}]),e}();n.DeferredPromise=a},{"es6-promise":4}],10:[function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,s=n;a=c=u=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=s,r=!0}},s=e("./promise"),a=e("browser-request"),u=function h(){o(this,h)};n.Request=u;var c=function d(){o(this,d)};n.Response=c;var l=function(e){function t(){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return r(t,e),t}(c);n.APIResponse=l;var f=function(e){function t(e){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var n={},r=new s.Promise(function(t,r){a(e,function(e,o,i){if(n._lastError=e,n._lastResponse=o,n._lastResult=i,e)r(e);else if(o.statusCode<200||o.statusCode>=400){var s=new Error("Request Failed with status code of "+o.statusCode);r(s)}else t({response:o,payload:i})})});return r.requestInfo=n,r}return r(t,e),t}(u);n.APIRequest=f},{"./promise":9,"browser-request":1}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){return r(this,e),this._settings=null,this}return o(e,[{key:"factory",value:function(e,t){return this._settings=t(),this}},{key:"get",value:function(e){return this._settings.get(e)}},{key:"finish",value:function(){return this}}]),e}(),s=(new i).factory("$ionicCoreSettings",function(){"IONIC_SETTINGS_STRING_START";"IONIC_SETTINGS_STRING_END"}).finish(),a=function(){function e(){r(this,e),this._locations={api:"https://apps.ionic.io",push:"https://push.ionic.io",analytics:"https://analytics.ionic.io"},this._devLocations=this.get("dev_locations"),this._devLocations||(this._devLocations={})}return o(e,[{key:"get",value:function(e){return s.get(e)}},{key:"getURL",value:function(e){return this._devLocations[e]?this._devLocations[e]:this._locations[e]?this._locations[e]:null}}]),e}();n.Settings=a},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./promise"),s=function(){function e(){r(this,e)}return o(e,[{key:"get",value:function(e){return window.localStorage.getItem(e)}},{key:"remove",value:function(e){return window.localStorage.removeItem(e)}},{key:"set",value:function(e,t){return window.localStorage.setItem(e,t)}}]),e}(),a={},u={},c=function(){function e(){r(this,e),this.strategy=new s}return o(e,[{key:"storeObject",value:function(e,t){var n=JSON.stringify(t);this.strategy.set(e,n),a[e]=t}},{key:"retrieveObject",value:function(e){var t=a[e];if(t)return t;var n=this.strategy.get(e);if(null===n)return null;try{return JSON.parse(n)}catch(r){return null}}},{key:"lockedAsyncCall",value:function(e,t){var n=this,r=new i.DeferredPromise;return u[e]?(r.reject("in_progress"),r.promise):"locked"===this.strategy.get(e)?(r.reject("last_call_interrupted"),r.promise.then(null,function(){n.strategy.remove(e)}),r.promise):(u[e]=!0,n.strategy.set(e,"locked"),t().then(function(t){r.resolve(t),delete u[e],n.strategy.remove(e)},function(t){r.reject(t),delete u[e],n.strategy.remove(e)},function(e){r.notify(e)}),r.promise)}}]),e}();n.Storage=c},{"./promise":9}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();if("object"==typeof angular&&angular.module){var i=null;angular.module("ionic.service.push",[]).factory("$ionicPushAction",["$state",function(e){var t=function(){function t(){r(this,t)}return o(t,[{key:"notificationNavigation",value:function(t){var n=!1,r={};try{n=t.additionalData.payload.$state}catch(o){n=!1}try{r=JSON.parse(t.additionalData.payload.$stateParams)}catch(o){r={}}n&&e.go(n,r)}}]),t}();return new t}]).factory("$ionicPush",[function(){return i||(i=new Ionic.Push("DEFER_INIT")),i}]).run(function(e){Ionic.IO.Core.getEmitter().on("ionic_push:processNotification",function(t){t.additionalData.foreground===!1&&e.notificationNavigation(t)})})}},{}],14:[function(e,t,n){"use strict";var r=e("./push"),o=e("./push-token");window.Ionic=window.Ionic||{},Ionic.Push=r.Push,Ionic.PushToken=o.PushToken},{"./push":17,"./push-token":16}],15:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../core/request"),s=e("../core/settings"),a=e("../core/core"),u=e("../core/logger"),c=new s.Settings,l=function(){function e(){r(this,e),this.logger=new u.Logger({prefix:"Ionic Push (dev):"}),this._serviceHost=c.getURL("push"),this._token=!1,this._watch=!1,this._emitter=a.IonicPlatform.getEmitter()}return o(e,[{key:"getDevToken",value:function(){var e="DEV-xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return this._token=e,this._token}},{key:"init",value:function(e){this._push=e;var t=this._token,n=this;t||(t=this.getDevToken());var r={method:"POST",uri:this._serviceHost+"/dev/push",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({dev_token:t})};new i.APIRequest(r).then(function(){n.logger.info("registered with development push service",t),n._emitter.emit("ionic_push:token",{token:t}),n.registerCallback&&n.registerCallback({registrationId:t}),n.watch()},function(e){n.logger.error("error connecting development push service.",e)})}},{key:"checkForNotifications",value:function(){if(!this._token)return!1;var e=this,t={method:"GET",uri:this._serviceHost+"/dev/push/check",headers:{Accept:"application/json","Content-Type":"application/json","X-Ionic-Dev-Token":this._token},json:!0};new i.APIRequest(t).then(function(t){if(t.payload.messages.length>0){var n={message:t.payload.messages[0],title:"DEVELOPMENT PUSH"};console.warn("Ionic Push: Development Push received. Development pushes will not contain payload data.");var r=e._push.notificationCallback&&e._push.notificationCallback(n);if(r===!1)return;alert(n.message)}},function(t){e.logger.error("unable to check for development pushes.",t)})}},{key:"watch",value:function(){this.logger.info("watching for new notifications");var e=this;this._watch||(this._watch=setInterval(function(){e.checkForNotifications()},5e3))}},{key:"halt",
value:function(){this._watch&&clearInterval(this._watch)}}]),e}();n.PushDevService=l},{"../core/core":6,"../core/logger":8,"../core/request":10,"../core/settings":11}],16:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this._token=t||null}return o(e,[{key:"toString",value:function(){var e=this._token||"null";return"<PushToken ['"+e+"']>"}},{key:"token",set:function(e){this._token=e},get:function(){return this._token}}]),e}();n.PushToken=i},{}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../core/app"),s=e("../core/settings"),a=e("../core/core"),u=e("../core/logger"),c=e("./push-token"),l=e("./push-dev"),f=new s.Settings,h="DEFER_INIT",d=function(){function e(t){r(this,e),this.logger=new u.Logger({prefix:"Ionic Push:"});var n=new i.App(f.get("app_id"),f.get("api_key"));if(n.devPush=f.get("dev_push"),n.gcmKey=f.get("gcm_key"),!n.id||!n.apiKey)return this.logger.error("no app_id or api_key found. (http://docs.ionic.io/docs/io-install)"),!1;if(a.IonicPlatform.isAndroidDevice()&&!n.devPush&&!n.gcmKey)return this.logger.error("GCM project number not found (http://docs.ionic.io/docs/push-android-setup)"),!1;if(this.app=i.App,this.registerCallback=!1,this.notificationCallback=!1,this.errorCallback=!1,this._token=!1,this._notification=!1,this._debug=!1,this._isReady=!1,this._tokenReady=!1,this._blockRegistration=!1,this._emitter=a.IonicPlatform.getEmitter(),t!==h){var o=this;o._emitter.on("ionic_core:plugins_ready",function(){o.init(t)})}}return o(e,[{key:"init",value:function(e){var t=this._getPushPlugin();if(!t)return!1;if("undefined"==typeof e&&(e={}),"object"!=typeof e)return this.logger.error("init() requires a valid config object."),!1;var n=this;return e.pluginConfig||(e.pluginConfig={}),a.IonicPlatform.isAndroidDevice()&&(e.pluginConfig.android||(e.pluginConfig.android={}),e.pluginConfig.android.senderId||(e.pluginConfig.android.senderID=n.app.gcmKey)),e.onRegister&&this.setRegisterCallback(e.onRegister),e.onNotification&&this.setNotificationCallback(e.onNotification),e.onError&&this.setErrorCallback(e.onError),this._config=JSON.parse(JSON.stringify(e)),this._isReady=!0,this._emitter.emit("ionic_push:ready",{config:this._config}),this}},{key:"addTokenToUser",value:function(e){this._token||this.logger.info("a token must be registered before you can add it to a user."),"object"==typeof e?a.IonicPlatform.isAndroidDevice()?e.addPushToken(this._token,"android"):a.IonicPlatform.isIOSDevice()?e.addPushToken(this._token,"ios"):this.logger.info("token is not a valid Android or iOS registration id. Cannot save to user."):this.logger.info("invalid $ionicUser object passed to $ionicPush.addToUser()")}},{key:"register",value:function(e){this.logger.info("register");var t=this;return this._blockRegistration?(t.logger.info("another registration is already in progress."),!1):(this._blockRegistration=!0,void this.onReady(function(){if(t.app.devPush){var n=new l.PushDevService;n.init(t),t._blockRegistration=!1,t._tokenReady=!0}else t._plugin=PushNotification.init(t._config.pluginConfig),t._plugin.on("registration",function(n){t._blockRegistration=!1,t._token=new c.Token(n.registrationId),t._tokenReady=!0,"function"==typeof e&&e(t._token)}),t._debugCallbackRegistration(),t._callbackRegistration()}))}},{key:"unregister",value:function(e,t){return this._plugin?this._plugin.unregister(e,t):!1}},{key:"getPayload",value:function(e){var t={};return"object"==typeof e&&e.additionalData&&e.additionalData.payload&&(t=e.additionalData.payload),t}},{key:"setRegisterCallback",value:function(e){return"function"!=typeof e?(this.logger.info("setRegisterCallback() requires a valid callback function"),!1):(this.registerCallback=e,!0)}},{key:"setNotificationCallback",value:function(e){return"function"!=typeof e?(this.logger.info("setNotificationCallback() requires a valid callback function"),!1):(this.notificationCallback=e,!0)}},{key:"setErrorCallback",value:function(e){return"function"!=typeof e?(this.logger.info("setErrorCallback() requires a valid callback function"),!1):(this.errorCallback=e,!0)}},{key:"_debugCallbackRegistration",value:function(){var e=this;this._config.debug&&(this._plugin.on("registration",function(t){e._token=new c.Token(t.registrationId),e.logger.info("device token registered",e._token)}),this._plugin.on("notification",function(t){e._processNotification(t),e.logger.info("notification received",e._notification)}),this._plugin.on("error",function(t){e.logger.error("unexpected error occured."),e.logger.error(t)}))}},{key:"_callbackRegistration",value:function(){var e=this;this._plugin.on("registration",function(t){return e._token=new c.Token(t.registrationId),e.registerCallback?e.registerCallback(t):void 0}),this._plugin.on("notification",function(t){return e._processNotification(t),e.notificationCallback?e.notificationCallback(t):void 0}),this._plugin.on("error",function(){return e.errorCallback?e.errorCallback():void 0})}},{key:"_processNotification",value:function(e){this._notification=e,this._emitter.emit("ionic_push:processNotification",e)}},{key:"_getPushPlugin",value:function(){var e=this,t=!1;try{t=window.PushNotification}catch(n){e.logger.info("something went wrong looking for the PushNotification plugin")}return t||!a.IonicPlatform.isIOSDevice()&&!a.IonicPlatform.isAndroidDevice()||e.logger.error("PushNotification plugin is required. Have you run `ionic plugin add phonegap-plugin-push` ?"),t}},{key:"onReady",value:function(e){var t=this;this._isReady?e(t):t._emitter.on("ionic_push:ready",function(){e(t)})}}]),e}();n.Push=d},{"../core/app":5,"../core/core":6,"../core/logger":8,"../core/settings":11,"./push-dev":15,"./push-token":16}]},{},[16,15,17,14,13]);